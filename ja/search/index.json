[{"content":" ⚠️ご注意ください、ここにある内容は大規模言語モデルによって翻訳されたものです。\nようこそ—— 私の生活＆技術ブログへようこそ！孤独な生活でも外に向けて何かを発信する感覚を保つ必要があります。そこで、内容や形式にとらわれない場所で「共有欲」を満たしたいと思い、24年末にこのサイトを立ち上げ、その後も探求と改善を続けています。最初はhugoとstackテーマのテンプレートを使ってブログを素早く構築し、生活記録や技術共有をいくつか書きました。しかし、私の技術共有の多くが効率的でないことに気付きました（新しい考えを広めることもできず、知識を十分に蓄積することもできませんでした）。26年初めに、stackのv3.33.0ブランチを基にブログを再構築し、浅薄なフロントエンドスキルでいくつかの修正を加えました。今回は生活のアーカイブを中心に（例えば旅行の経験を記録したり、年間のまとめを共有したり）、時折研究の感想を書くつもりです。限られたエネルギーのため、頻繁に執筆や更新をすることはないかもしれませんが、文章や形式はより自由になるでしょう。また、個人アルバムも構築し、記念になる写真をアーカイブすることを希望しています。仮にCached Memoryと名付けました。\nこのブログを見る人はあまり多くないかもしれませんが、一定の範囲内の友人にだけ共有します。もちろんbingやgoogleの検索にも対応していますので、ブログを書く主な目的は生活を記録し、自分を楽しませることです。いずれにせよ、どのような方法でここにアクセスしたとしても、私は非常に光栄に思います。あなたの訪問もこのブログを立ち上げた意味の一部です。\nいくつかのヒント 他のブログを見たい場合はこちらをクリックしてください。私とこのサイトについてもっと知りたい場合はこちらをクリックしてください。タグでブログ記事を分類したい場合はこちらをクリックしてください。タイトルや内容のキーワードで興味のある内容を探したい場合はこちらをクリックしてください。友達リンクを見たい場合はこちらをクリックしてください。左側のメニューを簡単に紹介しましたが、もちろん私の連絡先も見つけることができますし、左下のボタンで言語（簡体字中国語、英語、日本語）を切り替えたり、明るい/暗いテーマを切り替えたりすることもできます。何か考えがあれば、下にコメントを残していただければと思います（ただしutterancesはgithubアカウントが必要です）。\n","date":"2026-01-01T00:00:00Z","image":"https://kambri.top/p/welcome/img/cover_hu_da9268f64eeb14d7.jpg","permalink":"https://kambri.top/ja/p/welcome/","title":"こんにちは、世界！"},{"content":" ⚠️ご注意ください、ここにある内容は大規模言語モデルによって翻訳されたものです。\n1日目 - 大阪 当日は早朝に出発し、先に6:30温州龍湾発のフライトで上海浦東に到着、その後10:05発の便で現地時間13:30前に関西空港に着陸した。\n流量カードの手配や荷物の預け待ち、ICOCAカードの交換にかなり時間を取られた。\nその後、南海空港線/本線を利用して大阪南海難波駅へ向かい（難波駅で迷子になった）、御堂筋線に乗り換えて本町駅へ。夕方にTHE BASEMENT HOTEL Osaka Honmachiにチェックイン。2025年に新規オープンしたこのホテルは評判も良く、立地も良好（本町は大阪の主要観光スポットに近いが、乗換えが頻繁に必要な点が難点）。\nチェックイン後、すぐにハッピーアワーへ。高層の景色を眺めながら軽く一杯、旅の始まりを祝う。\n最初の目的地は東側の大阪城公園と、大阪府警察本部の見学だったが、計算違いだった！一つは、出発時は明るかったのに到着時にはすっかり暗くなり、周囲の道路にはほとんど街灯もなく暗くて雰囲気が良くなかったこと。二つ目は天気予報を信じて傘を持たずに出たが、天守閣の下に着いた途端に大雨に見舞われ、やむなく大阪城の見学は諦めて、大阪城Miraizaに避難した。\n雨のため、急いでホテルに戻り休憩。雨が止んだ後、夕食を探しに出かけた。心斎橋へ徒歩で向かい、PARCO B2のフードコート街にある「new SUSHI center」に決定。寿司郎で未経験だった安康魚肝を試したが普通。だが、イカ刺身に感動し、追加注文。その他の料理も悪くない（特に突出してはいないが）、価格も手頃でコスパ良好。夕食後は19:30頃、PARCOと隣接の大丸が閉店間近だったため、ポケモンセンターやモンベルには行けず、次回に持ち越し。\nUNIQLO感謝祭の割引期限を意識し、心斎橋のUNIQLOで数点購入。免税後もお得感満載。道頓堀のグリコ看板の前で記念撮影後、良さそうなミルクティー店（Koi Thé）でミルクティーを購入したが、味は普通（560円は高い！）。\n正直、心斎橋と道頓堀の境界は曖昧で、ざっくり一つのエリアと考えて散策した。\n法善寺横丁を通り、そこにある水卦不動明王に水をかけてみた。近くの夫婦善哉も気になったが、食欲がなくて断念。最後に近くのbookoffに立ち寄り、1日目の行程終了。ホテルに戻り、やっぱりお風呂に入るのは最高！長風呂は少し気分が悪くなることもあるが、至福の時間だった。最初は少しつまずいたが、異国の地に来て交通や買い物の流れもだいたい掴めてきた。\n2日目 - 大阪 友人は朝食をあまり好まないため、私は前日にコンビニでおにぎりを買っておいた。日本のコンビニおにぎりは本当に美味しく、特に豆皮おにぎりと明太子おにぎりがお気に入り。今日は南側の動物園前駅周辺と、昨日のPARCOや大丸のリベンジを兼ねての行動。本町から中央線に乗り、谷町線に乗り換え、四天王寺前夕陽丘駅で下車。そこから徒歩で四天王寺へ。無料拝観できるが、中心伽藍（五重塔など）の見学には800円の拝観券が必要。\n四天王寺から通天閣までは徒歩15〜20分。遠回りすれば天王寺や阿倍野も見学可能（夜景も良さそう）。\n通天閣は事前予約制だが、閑散期なら現地予約も問題なし。展望台の料金は1000円だが、追加で500円の特別展望台チケットも購入。写真も撮ったが、1500円の写真はちょっと高い。\nこの時は人も少なく、展望台は非常に暑くて蒸し暑い。大阪の街並みを一望でき、建物の密度も圧巻。特別展望台の吊り台は高すぎて怖くて上がれなかった。\n昼食は新世界の本通商店街で、安くて美味しそうな元祖炸串総本店へ。評判通りの外観だが、実際は失敗だった。牛すじ、大阪焼き、炸串定食を注文したが、合計4000円超えで高くて味もイマイチ。\n午後は日本橋エリアを散策。二次元関連の店を中心に、駿河屋（本館・別館）、アニメイト（本館）、キッズランド、ジャングル、K-BOOKS、空想のメカ館などを巡る。楽しかったが、ほとんど買い物はせず、中古のアクセサリーやガチャを少々。\n日本橋周辺のトイレは少ないので、ジョーシンやキッズランドの位置に注意。\n一日中歩き回り、エヴァ旧TV版や新劇場版を見終えた後、空想のメカ館に長時間滞在。特に左端の綾波麗は本当に美しい。国内の市場価格と比べると、ここで買うのはコスパが良くないと判断し、ただショーウィンドウ越しに眺めただけ。\n夕方は難波の肉劇場で焼肉丼定食を注文し、2130円（肉追加、味噌汁、アイスウーロン茶付き）。味とコスパは良好。夜は心斎橋に戻り、ドン・キホーテで姉に頼まれた富士フイルムのチェキ用紙を見つけられず、代わりに大丸で昨日行きそびれたポケモンセンターやジャンプショップ、モンベルを巡る。モンベルは閉店間近で慌てて見学。\n光の饗宴イベント開催中の御堂筋を散策しながらホテルへ。帰宅後、今日の戦利品を整理し、ポケモンのボール風入浴剤で入浴。中にはランダムでポケモンが入っている（私はサーフゴー、友人はミズヒキノコ）。これは免税対象外の珍しい商品（レシートで確認）なので、日本国内で安心して使える。\n3日目 - 京都 紅葉シーズンと週末のため、京都の宿泊料金は高騰。予定していた2泊を1泊にして、日帰りで京都を往復する計画に変更。早朝5時半に目覚ましをセットし、清水寺へできるだけ早く到着できるように出発。中央線で堺筋本町から乗車し、堺筋線/阪急千里線に乗り換え（淡路駅で特急に乗り換え必要かも）し、烏丸駅へ。そこから四条高倉のバス（八条口207系統）で清水道へ。徒歩で清水坂へ向かい、所要時間は約1時間40分（880円）。JRの特急を使えばもっと高くなる。\n清水寺の拝観料は500円だが、地主神社はこの日メンテナンス中で見学できず。紅葉は見事に色づき、「唐紅の恋歌」の雰囲気も感じられるが、体力的に少し厳しい。\n8時過ぎには御守やおみくじの販売窓口が開く。私は開運桜鈴、金運守、御守護、縁結び守、幸守を購入（奇妙な御守ボタンも押したが、気に入った）。おみくじは100円で半吉。\n8時半頃、清水寺を見学し終え、二年坂・三年坂を散策。時間が早すぎてほとんどの店は開店前だった。ここには非常に和風なスタバもあり、白人観光客で混雑。\nお腹も空き疲れたため、適当なカフェてしごとのみせmokumokuでブランチのコーヒー定食を注文したが、写真の通り味は普通でおすすめしない。\n疲れ果てて、八坂神社まで遠回りしたくなかったため、祇園花見小路沿いの建仁寺へ。早すぎて閑散としており、多くの店は閉まっていた。建仁寺は800円の拝観料で、靴を脱いで入る。床は冷たいが、日差しの当たる場所は暖かい。庭園を眺めながら休憩し、静かな時間を過ごす。\n建仁寺のトイレは非常に清潔で快適。\nその後、鴨川を散策し、一蘭（京都河原町店）でラーメンを食べる。初めての一蘭なので、控えめに味を選び、加麺、チャーシュー、塩味煮玉子を注文（玉子は付いてこなかった）。追加で玉子とご飯も頼む。スープでご飯を浸すと絶品。油と塩と炭水化物の絶妙なハーモニー。\nその後、祇園の伊藤久右衛門（祇園四条店）でスイーツとお土産を購入。抹茶スイーツはどれも満足。特に辻利京らんぐ（白い恋人抹茶版）、辻利ラスク、伊藤久右衛門茶游月がお気に入り。免税対応もあり、買い物後にはお土産用の割引クーポンももらえる（ただし、店内で食べてから買い物したため、クーポンは使えず）。\n次に京阪本線で出町柳へ。徒歩約10分で下鴨神社へ。途中、鴨川デルタや鴨川公園、河合神社を経由。下鴨神社は今回の旅で一番気に入った神社。多くの写真はアクション中で撮れなかったが、また後日アップ予定。季節限定の紅葉御守も購入。\n夕方、京阪本線で帰路につき、ホテルに戻る。近くの居酒屋（海鮮屋台おくまん 西本町店）へ。店主はとても親切で、隣の席の在日留学生も気さくに話しかけてくれた。コスパ最高の約5000円の料理を堪能。\n4日目 - 兵庫 今日は兵庫県（姫路市・神戸市中心）へ。充実した日程のため、早朝に姫路へ向かう。四橋線で西梅田へ出て、大阪駅から東海道・山陽本線に乗車。神戸、明石、加古川を経由し、姫路へ。左側の車窓から瀬戸内海と明石海峡大橋が見え、絶景。所要時間は約1時間半（1860円）。ミニJRパスを買えば良かったと後悔。\n天気も良く、姫路駅から姫路城へ。城の周囲には姫路城風のマンホールも点在。姫路城は世界文化遺産で、遠くから見ても壮大。入城料は1000円（今後は2500円に値上げ予定）。姫路城と好古園の共通券（追加50円）を購入。\n見学順路に従い、西の丸御殿（約10〜15分）→天守閣へ。内部は靴を脱ぎ、ビニール袋に入れる必要あり。木造の姫路城は見応え十分。\n城を出て、近くの好古園へ。秋の紅葉が見事で、長時間滞在。\nJR姫路駅前に戻り、姫路白壁プリン（520円）を購入。クッキーを砕いて上に散らしたもので、味も良好。お土産にしたかったが、保存が難しいため断念。昼食は二階町のうなととで、鰻の蒲焼定食（1000円）を。\n午前中だけで姫路市内を回るのはやや忙しい。出発は早かったが、姫路を離れるのは午後1時半頃。予定では神戸へ直行だったが、気まぐれで明石の衛宮士郎の家（聖地巡礼）に行きたくなり、明石駅で一人別行動。幸い、織田家長屋門は明石駅から10分以内の距離だった。ただ、時間があれば舞子まで行き、明石海峡大橋も見たかった。\n神戸三宮駅に到着したのは15時半頃。先に生田神社へ。縁結びや健康祈願のパワースポットだが、水占いは面倒なのでやめた。最後に縁結び守を購入。\n次に北野異人街へ。坂道が非常に急で、まるで山登りのよう。時間も押していたため、急ぎ足で進み、魚麟の館（間桐邸）に到着。入場料は1100円だが、単なる見学には割高と判断し、入場せず。次に風見鶏の館（遠坂邸）へ。明治風、西洋風の建物で、結婚式の新郎新婦も見かけた。\n夕方、92系統バスで三宮神社へ。アメリカンパークで友人と合流。ちょうどブルーアワーの時間帯で、神戸港の夜景は見えず残念。神戸港タワーもちらりと見て、夕食へ。神戸牛を食べたかったが、値段と量が少なくて断念。三宮地下街の京都勝牛で、炸牛排定食（3619円）を。量は少なく、米も足りない感じ。\n最後に、神戸のシンボル東木大橋と神戸大橋を見に行きたくて、三宮から新交通港湾人工島線で港湾客運所へ。そこから徒歩で神戸大橋を渡り、港島北公園へ。ここは神戸空港の人工島。夜の時間帯は列車も閑散としており、荷物を持った乗客も多い。FZの聖地巡礼も済ませ、海風が強く寒いので防寒必須。兵庫の一日を締めくくり、三宮から山陽・東海道線で大阪へ戻った。\n5日目 - 大阪、奈良 大阪のホテルをチェックアウト後、奈良駅近くの温泉ホテルへ。今日はのんびりとした日程。万博記念公園は次回に持ち越し、荷物を預けて住吉大社へ。日本の住吉神社の総本宮で、千年以上の歴史がある。\n反橋の角度は48度と急峻。住吉公園を抜けると、電線だらけの住宅街に出る。地元の人たちがピクニックを楽しむ風景も。\n昼前に黒門市場へ。豪快立寿司で昼食。ウニは期待外れ、刺身も少し雑だったが味は良く、コスパも良好。\nその後、市場内を散策し、たこ焼きを購入したが、紅しょうが入りは苦手。高橋豆腐店の無糖アイス豆乳も買ったが、味は微妙（糖なしだから当然か）。\n奈良のホテルに入るまで少し時間があったため、第一日目のリベンジも兼ねて、再び大阪城公園へ。昼間の大阪府警察本部と天守閣を見学。\n午後、奈良の御宿ノノ奈良天然温泉ホテルにチェックイン。奈良駅から徒歩約200mと便利。畳の部屋で靴を脱ぎ、分趾ソックスを履く。午後3時から翌朝10時までの天然温泉大浴場「吉野桜の湯」が自慢。朝食も評判と聞き、2500円を追加。\n周辺にはコンビニや薬局、JR駅も近く、食事処も充実。夜は、すがまちのお好み焼き店へ。家族経営の小さな店だが、地元民や観光客で賑わう。味も良く、コスパも高い。\n奈良のモンベルへ。大きな店舗で、2階では旧モデルの割引も。渔夫帽やストリームパーカも購入（財布が泣く）。免税も可能だが、約3%の手数料あり。英語表記が少なく、片仮名表記に苦労。\n帰りのバスは30分に1本。歩いてホテルへ戻りながら、静かな夜の街を散策。温泉に入り、酢醤油ラーメンも堪能。\n6日目 - 奈良 奈良に3泊する予定だったが、実質は1日だけの観光。主に東大寺、奈良公園、春日大社周辺を巡る。薬師寺や法隆寺は遠いため断念。\nホテルのビュッフェ朝食後、興福寺へ。鹿が増えてきたのを見て、鹿せんべいも売られている。昨年狂犬病予防接種を受けたため、餌やりは控えめに。\n東大寺では、可愛い鹿と遭遇。壮大な外観はさすが世界遺産。\n途中、小学生や中学生の団体も見かけ、羨ましい気持ちに。私の学生時代は勉強だけだった。\n東大寺を出て、奈良公園を散策。春日大社へ向かう途中、谷水茶屋で天ぷらうどんを食べた。シンプルだが味は良好。社内は撮影禁止で写真はなし。\nその後、若草山へ。最初は小さな丘と思ったが、登山となり、かなり疲れたが山頂からの景色は素晴らしい。\n毎年1月の第四土曜日に若草山焼山祭が開催されるため、封山されることも。\n夕方、日没前に山を下り、春日大社前の表参道を歩き、一の鳥居へ。静かな道で禅の心を感じる。\n下山後、遅い時間に中谷堂で有名な抹茶麻薯を購入。朝は営業前だった。夜は竹の館で関東煮を。予約必須の店だが、当日は運良く空席にあり、少し高めのメニューを注文。味は普通だが悪くない。帰路、ローソンで豆皮おにぎり、サケおにぎり、天津飯を購入。天津飯はひどい味だった。\n7日目 - 京都 予定は、午前に伏見稲荷大社、午後に宇治へ。お土産や抹茶スイーツも楽しむつもりだったが、体調不良で、伏見稲荷後に一人奈良へ戻ることに。\nJR奈良線で稲荷（Inari）駅へ。二次元の聖地、伏見稲荷大社に到着！本殿では儀式が行われており、神聖な雰囲気。\n稲荷山は山麓にあり、山登りも必要。疲れたが、鳥居の数には圧倒された。\n山を下りると、体調も少し崩れたため、京都駅のPLUSTAでお土産を購入。免税店ではないので注意。友人と一蘭（ウマル店）でラーメンを食べ、帰路へ。\n翌日の高熱と飛行機搭乗の不安から、薬局で電子体温計（約2700円）を購入。血液滴下タイプで、持ち歩き用にすれば良かったと後悔。\n8日目 - 大阪 帰路の日。チェックアウト後、荷物を持って新今宮から南海線で関西空港へ。フライトは午後2時のため、先に空港のアウトレットで買い物。スポーツブランドは免税対象外が多いが、価格は国内より安く、いくつかお土産を購入。\n最後に、空港の711で美味しいプリンを買い、姉にお土産。これで関西旅行は完結。\nエピローグ 疲れた！写真整理や旅の思い出を書き出すのに数日かかった。今回の関西旅行はとても楽しかった。Actionで多くの映像（約200GB）も記録しており、時間ができたら整理してアップロード予定。\n主な撮影機材：OnePlus Ace 3、DJI Action 5 Pro\n旅行計画マップ：Google Map - Kansai（出発前に作成した計画マップ、行きたい場所や予定を書き込み済み）\n","date":"2026-01-22T00:00:00Z","image":"https://kambri.top/p/travel/img/cover_hu_6cb61925a1ce5448.jpg","permalink":"https://kambri.top/ja/p/travel/","title":"初めての関西の雑記帳"},{"content":" ⚠️ご注意ください、ここにある内容は大規模言語モデルによって翻訳されたものです。\nこの期間、機房とのやり取りが多く、三江源データ分析センターに新しい購入機器を設置するエンジニアや学院の運用担当の先生方と連携してきました。そこで、高性能クラスター構築の経験をまとめます。\nハードウェア 組み立て 新たに購入した整備済みサーバーには、ハードディスク、メモリ、ネットワークカード（Ethernet）、RAIDカードが揃っています。起動時には、メイン電源と予備電源の両方が点灯していることを必ず確認してください。構成は、Intelのデュアルソケットマシン2台とAMDのデュアルソケットマシン2台です。RDMAネットワークカードは別途調達し、Mellanox MT28908（ConnectX-6）を使用しています。高性能計算センターからNVIDIA A800 80GB PCIEカード8枚を借用し、トポロジーは4台のマシンに8枚のカードを配置する予定です。\nサーバー CPU メモリ ハードディスク H3C UniServer R4900 G6 Intel(R) Xeon(R) GOLD 6542Y(250w)×2 32G DDR5 5600×8 960G SSD×2 + 4TB SATA×3 + RAID PM8204-2G H3C UniServer R4950 G6 AMD EPYC 9654 96コアプロセッサ(360w)×2 32G DDR5 4800×8 960G SSD×2 + 4TB SATA×3 + RAID PM8204-2G 起動ディスクの作成 ブート可能なISOイメージ、書き込みソフト（RufusまたはUltraISO）、およびUSBメモリ（できればUSB3.0推奨）を準備します。ここではサーバー側のUbuntu Server 22.04.5 LTS（長期サポート版、2027年4月までサポート）を選択し、Ubuntu公式サイトからブート可能なISOファイルを取得します。\n次に、書き込みソフトを使ってハードディスクにイメージを書き込みます。UltraISOでは書き込み方式をUSB-HDD+に設定し、RufusではターゲットシステムタイプをBIOSまたはUEFIに設定します。必要に応じてファイルシステムやその他の設定を調整してください。フォーマット後、システムイメージを書き込み（約2〜3分）ます。\nソフトウェア ネットワーク設定 通常、システムインストール時には設定しません。インストール完了後にip link showコマンドでネットワークインターフェース名を確認します。次にvim /etc/netplan/50-cloud-init.yamlを編集し、以下のように設定します。\n1 2 3 4 5 6 7 8 9 10 11 12 13 # ... network: ethernets: ens16f0: addresses: - \u0026lt;A.B.C.D\u0026gt;/24 nameservers: addresses: [] search: [] routes: - to: default via: \u0026lt;A.B.C.D\u0026gt; version: 2 rootパスワードの設定 1 2 su root passwd root Linuxカーネルの自動更新を無効化 無効にしないと、apt update後にサービスの再起動や更新を促す通知が出続けます。/etc/apt/apt.conf.d/内の10periodicと20auto-upgradesのパラメータを0に変更します。\nsudo vim /etc/apt/apt.conf.d/10periodic\n内容を以下に更新：\n1 2 3 APT::Periodic::Update-Package-Lists \u0026#34;0\u0026#34;; APT::Periodic::Download-Upgradeable-Packages \u0026#34;0\u0026#34;; APT::Periodic::AutocleanInterval \u0026#34;0\u0026#34;; sudo vim /etc/apt/apt.conf.d/20auto-upgrades\n内容を以下に更新：\n1 2 APT::Periodic::Update-Package-Lists \u0026#34;0\u0026#34;; APT::Periodic::Unattended-Upgrade \u0026#34;0\u0026#34;; リバースプロキシ設定 計算ノードはインターネットに接続しないため、ローカルを踏み台としてリバースプロキシを設定します。\nUsers/username/.ssh/configに以下を追加：\n1 2 3 4 5 Host \u0026lt;hostname\u0026gt; HostName \u0026lt;IP\u0026gt; Port \u0026lt;port\u0026gt; User \u0026lt;username\u0026gt; RemoteForward \u0026lt;Port1\u0026gt; 127.0.0.1:\u0026lt;Port2\u0026gt; 最近学んだ方法として、.ssh/config内でProxyJumpを設定し、シームレスに踏み台接続を行うことも可能です。パスワード不要にするには、接続先ホストの~/.ssh/authorized_keysにローカルの公開鍵を登録してください。\n1 2 3 4 5 6 7 8 9 10 11 12 Host \u0026lt;hostname\u0026gt; HostName \u0026lt;IP\u0026gt; Port \u0026lt;port\u0026gt; User \u0026lt;username\u0026gt; RemoteForward \u0026lt;Port1\u0026gt; 127.0.0.1:\u0026lt;Port2\u0026gt; Host \u0026lt;destination\u0026gt; HostName \u0026lt;IP\u0026gt; Port \u0026lt;port\u0026gt; User \u0026lt;username\u0026gt; ProxyJump \u0026lt;hostname\u0026gt; RemoteForward \u0026lt;Port1\u0026gt; 127.0.0.1:\u0026lt;Port2\u0026gt; 事前準備のポイント 1 2 3 4 5 6 7 8 9 10 11 # Linuxの自動休眠を無効化 echo \u0026#34;\\$nrconf{kernelhints} = 0;\u0026#34; \u0026gt;\u0026gt; /etc/needrestart/needrestart.conf echo \u0026#34;\\$nrconf{restart} = \u0026#39;l\u0026#39;;\u0026#34; \u0026gt;\u0026gt; /etc/needrestart/needrestart.conf systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target # aptとapt-getの更新 apt update apt upgrade apt-get update apt-get upgrade # 必要なパッケージのインストール apt install git wget vim curl htop net-tools pciutils build-essential パーティション設定 ディスクが認識されない場合、システムインストール時にエラーblock probing did not discover any disksが出ることがあります。ハードディスクやRAIDカードの点灯状態を確認してください。\n1 2 3 4 5 6 7 8 9 10 11 12 13 lsblk # 新しいディスクのデバイス名を確認（例：/dev/sdX） sudo pvcreate /dev/sdb /dev/sdc /dev/sdd # 物理ボリュームの作成 sudo vgcreate vg_home /dev/sdb /dev/sdc /dev/sdd # ボリュームグループの作成 vgdisplay # ボリュームグループ情報を確認 sudo lvcreate -l 100%FREE -n lv_home vg_home # 全容量を使った論理ボリューム作成 sudo mkfs.ext4 /dev/vg_home/lv_home # ext4ファイルシステムでフォーマット sudo mount /dev/vg_home/lv_home /home # /homeにマウント # 自動マウント設定 sudo blkid /dev/vg_home/lv_home # UUIDを取得 sudo vim /etc/fstab \u0026gt;\u0026gt;\u0026gt; UUID=\u0026lt;UUID\u0026gt; /home ext4 defaults 0 2 sudo mount -a df -a # 正常にマウントされたか確認 NFS共有ファイルシステム 1 sudo apt install nfs-kernel-server nfs-common rdma-core # 全ノードで実行 NFSサーバー設定 1 2 3 4 5 6 7 8 9 sudo mkdir -p /home sudo chmod 777 /home sudo vim /etc/exports \u0026gt;\u0026gt;\u0026gt; /home *(rw,sync,no_root_squash) sudo vim /etc/nfs.conf # RDMAを有効化 \u0026gt;\u0026gt;\u0026gt; [nfsd] \u0026gt;\u0026gt;\u0026gt; rdma=y sudo systemctl restart nfs-kernel-server sudo systemctl enable nfs-kernel-server クライアント設定 1 2 3 4 sudo mount -o rdma,vers=4.2 \u0026lt;server_ip\u0026gt;:/home /home df -h | grep /home # マウント成功を確認 sudo vim /etc/fstab \u0026gt;\u0026gt;\u0026gt; \u0026lt;server_ip\u0026gt;:/home /home nfs4 rdma,vers=4.2 0 0 RDMA伝送の検証 1 2 mount | grep /home cat /proc/fs/nfsfs/servers # transport列がrdmaになっているか確認 InfiniBandドライバ ドライバのダウンロード：NVIDIA InfiniBand Software | NVIDIA | NVIDIA Developer\nMLNX_OFED：Linux InfiniBand Drivers\n古いバージョンのIBを使用する場合は、リリースノートでサポート状況を確認してください。\nIBデバイスの確認：\n1 lspci | grep -i mell IBのopensmサービスを起動：\n1 2 3 4 5 6 # 未インストールの場合 sudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y sudo apt install opensm infiniband-diags ibutils perftest -y sudo systemctl start opensm systemctl status opensm sudo systemctl enable opensm # 自動起動設定 IBデバイスの認識状況を確認：\n1 2 ibv_devinfo ibstat サーバーとクライアントのIB帯域をテスト：\n1 2 3 ibv_devices # デバイス名を確認（例：mlx5_0） ib_read_bw -a -d \u0026lt;device_name\u0026gt; --report_gbits # サーバー側 ib_read_bw -a -F \u0026lt;ip_addr\u0026gt; -d \u0026lt;device_name\u0026gt; --report_gbits # クライアント側（-aは全メッセージサイズ、-Fはサーバーへの接続を強制、--report_gbitsはGbps単位で表示） MTU（最大伝送単位）の設定：\n1 2 ifconfig | grep ib # IBインターフェースを確認 ifconfig ib0 mtu 65520 # 両方のマシンで同じMTU値に設定 簡単なテスト：ibpingまたはibping \u0026lt;ip_addr\u0026gt;を実行\nCUDA Nouveauドライバの無効化/アンインストール（必要に応じて） 1 sudo vim /etc/modprobe.d/blacklist.conf 最後に以下を追加：\n1 2 blacklist nouveau options nouveau modeset=0 initramfsを再構築し、サーバーを再起動して反映させます。\n1 2 sudo update-initramfs -u sudo reboot lsmod | grep nouveauで確認し、出力がなければ無効化成功です。\nドライバのインストール GPUモデルを確認：\n1 lspci | grep -i nvidia ドライバのダウンロード：NVIDIA Driver\nA800/V100用CUDA12.6ドライバ例： Data Center Driver for Linux x64 560.35.03 | Linux 64-bit | NVIDIA\nドライバのアンインストール：\n1 sudo /usr/bin/nvidia-uninstall CUDAのインストール：CUDA Toolkit 12.6 Update 3\nCUDA Toolkitのアーカイブ：CUDA Toolkit Archive\nNVCCはCUDA Toolkitに含まれるため、公式サイトから対応バージョンのrunfileをダウンロードし、以下のようにインストールします。\n例：CUDA Toolkit 12.2の場合\n1 2 wget https://developer.download.nvidia.com/compute/cuda/12.9.1/local_installers/cuda_12.9.1_575.57.08_linux.run sudo sh cuda_12.9.1_575.57.08_linux.run ドライバの再インストールは不要です。インストール後、環境変数を設定します。\n1 2 3 echo \u0026#39;export PATH=/usr/local/cuda-12.2/bin:$PATH\u0026#39; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#39;export LD_LIBRARY_PATH=/usr/local/cuda-12.2/lib64:$LD_LIBRARY_PATH\u0026#39; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc /usr/local/cudaをデフォルトパスとして使いたい場合は、シンボリックリンクを作成します。\n1 2 3 4 sudo ln -s /usr/local/cuda-12.2 /usr/local/cuda echo \u0026#39;export PATH=/usr/local/cuda/bin:$PATH\u0026#39; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#39;export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH\u0026#39; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc ","date":"2025-04-23T00:00:00Z","image":"https://kambri.top/p/ops/img/cover_hu_b3cf35a0855a47e2.png","permalink":"https://kambri.top/ja/p/ops/","title":"高性能クラスター運用管理——セットアップ"},{"content":" ⚠️ご注意ください、ここにある内容は大規模言語モデルによって翻訳されたものです。\n本記事では、クラスターでよく使われるバージョン管理ソフトウェアMODULESと、MPIの2つの実装（UCX+OpenMPI/MPICH）、Intel oneAPIのインストールと設定について紹介します。MODULES（最新版は2024年11月リリース）はソフトウェア依存関係が複雑で、modulefileはTCLで記述する必要があります（生成AIを活用可能）。将来的には、より使いやすいspackの学習も検討します。\nMODULES (v5.4.0) 参考資料 TCL公式サイト\nMODULESインストールドキュメント\nGCC公式ミラーサイト\nGCCビルドガイド\n[ Module ] 環境変数管理ツール Modulesのインストールと使い方 - YEUNGCHIE\nmodule使用例 - 北京大学高性能計算校級公共プラットフォームユーザードキュメント\n依存関係のインストール TCL (\u0026gt;=v8.5) 1 2 3 4 5 6 7 8 9 sudo wget http://prdownloads.sourceforge.net/tcl/tcl8.6.14-src.tar.gz sudo tar -zxvf tcl8.6.14-src.tar.gz cd tcl8.6.14/unix sudo ./configure --prefix=/usr/local sudo make sudo make install sudo whereis tcl sudo ln /usr/local/bin/tclsh8.6 /usr/bin/tclsh GMP 1 2 3 4 5 6 7 8 sudo wget ftp://ftp.gnu.org/gnu/gmp/gmp-5.0.1.tar.bz2 sudo tar -vxf gmp-5.0.1.tar.bz2 cd gmp-5.0.1/ sudo ./configure --prefix=/usr/local/gmp-5.0.1 sudo make sudo make install sudo make check \u0026gt;\u0026gt;\u0026gt; 全30テスト成功... MPFR（バグありだが許容範囲） 1 2 3 4 5 6 sudo wget https://ftp.gnu.org/gnu/mpfr/mpfr-3.1.5.tar.xz sudo tar -vxf mpfr-3.1.5.tar.xz cd mpfr-3.1.5/ sudo ./configure --prefix=/usr/local/mpfr-3.1.5 --with-gmp=/usr/local/gmp-5.0.1 sudo make sudo make install MPC 1 2 3 4 5 6 sudo wget http://www.multiprecision.org/downloads/mpc-0.9.tar.gz sudo tar -vxf mpc-0.9.tar.gz cd mpc-0.9/ sudo ./configure --prefix=/usr/local/mpc-0.9 --with-gmp=/usr/local/gmp-5.0.1/ --with-mpfr=/usr/local/mpfr-3.1.5/ sudo make sudo make install MODULESのインストール 1 2 3 4 5 6 7 8 9 sudo curl -LJO https://github.com/cea-hpc/modules/releases/download/v5.4.0/modules-5.4.0.tar.gz sudo tar xfz modules-5.4.0.tar.gz sudo ./configure --with-tcl=/usr/local/lib --prefix=/home/Modules --modulefilesdir=/home/modulefiles sudo make sudo make install sudo ln -s /home/Modules/init/profile.sh /etc/profile.d/module.sh sudo ln -s /home/Modules/init/profile.csh /etc/profile.d/module.csh source /home/Modules/init/profile.sh # 推奨：/etc/profileに書き込み、シェル起動時に自動読み込み（`source /home/Modules/init/profile.sh`は手動実行） 注意：特別な事情により、MODULESと他のソフトウェアは/homeディレクトリにインストールしています。 /home/moduledownload/にTCL（8.6）とMODULE（5.4.0）のインストールパッケージを一時保存。 /home/Module/にModuleの実ファイル群（初期化ファイルのシンボリックリンク含む）。 /home/modulefiles/に各ソフトウェアのバージョンファイル（modulefile）。2階層目はソフト名、3階層目はバージョン番号のテキスト。 /home/apps/に実際のソフトウェア。\nMPI 参考資料 MPICH公式ミラーサイト\nOpenMPI v5.0.0\nUCXリポジトリ\nUCX 1.15.0とOpenMPI 5.0.0のビルド・インストール：詳細ガイド\nUCXのインストール（任意） Unified Communication X 1 2 3 4 5 6 7 wget https://github.com/openucx/ucx/releases/download/v1.15.0/ucx-1.15.0.tar.gz tar -xvzf ucx-1.15.0.tar.gz cd ucx-1.15.0 mkdir build \u0026amp;\u0026amp; cd build ../configure --prefix=/home/zhengkaige/ucx make -j N make install MPICH (v4.2.2)のインストール 1 2 3 4 5 tar -xvzf mpich-4.2.2.tar.gz cd mpich-4.2.2 ./configure --prefix=/home/apps/MPICH/4.2.2 make make install エラー例：configure: error: UCX installation does not meet minimum version requirement (v1.9.0). Please upgrade your installation, or use --with-ucx=embedded.\nOpenMPI (v5.0.0)のインストール 1 2 3 4 wget https://download.open-mpi.org/release/open-mpi/v5.0/openmpi-5.0.0.tar.gz tar -xzvf openmpi-5.0.0.tar.gz cd openmpi-5.0.0 mkdir build \u0026amp;\u0026amp; cd build vim ~/.bashrc\n1 2 export PATH=/home/kambri/software/openmpi/5.0.0-ucx-1.15.0/bin:$PATH export LD_LIBRARY_PATH=/home/kambri/software/openmpi/5.0.0-ucx-1.15.0/lib:$LD_LIBRARY_PATH Modulefileの作成例 1 2 3 4 5 6 #%Module set version 4.2.2 set MPI_HOME /home/apps/MPICH/4.2.2 prepend-path PATH \u0026#34;${MPI_HOME}/bin\u0026#34; prepend-path LD_LIBRARY_PATH \u0026#34;${MPI_HOME}/lib\u0026#34; prepend-path MANPATH \u0026#34;${MPI_HOME}/share/man\u0026#34; Intel oneAPI 参考資料 Developer Toolkits\nIntel® oneAPI Base Toolkitの入手\nIntel® oneAPI HPC Toolkitの入手\nIntel oneAPIミラーサイト\nIntel oneAPIのインストール（2025年版、Base ToolkitとHPC Toolkit含む） 公式のオフラインインストール方式に従ってインストールしてください。注意点として、IntelはoneAPIの更新時に古いバージョンのUIを削除するため、旧バージョンのインストールにはミラーサイト等を利用します。ただし、新バージョンは使い勝手が悪く、例えば2025.0のmpiiccは依然としてiccをコンパイラとして使用していますが、2025.0（2023後半や2024.xも含む）にはiccが含まれていません。iccは2023年後半にリリースされたoneAPIから削除済みです。\n1 2 3 4 5 6 # Base Toolkitのインストール wget https://registrationcenter-download.intel.com/akdlm/IRC_NAS/dfc4a434-838c-4450-a6fe-2fa903b75aa7/intel-oneapi-base-toolkit-2025.0.1.46_offline.sh sudo sh ./intel-oneapi-base-toolkit-2025.0.1.46_offline.sh -a --silent --cli --eula accept # HPC Toolkitのインストール wget https://registrationcenter-download.intel.com/akdlm/IRC_NAS/b7f71cf2-8157-4393-abae-8cea815509f7/intel-oneapi-hpc-toolkit-2025.0.1.47_offline.sh sudo sh ./intel-oneapi-hpc-toolkit-2025.0.1.47_offline.sh -a --silent --cli --eula accept ","date":"2025-05-11T00:00:00Z","image":"https://kambri.top/p/ops_2/img/cover2_hu_c3ff04135ea44c30.png","permalink":"https://kambri.top/ja/p/ops_2/","title":"高性能クラスター運用管理——ソフトウェア環境（Modules、MPI、oneAPI）"}]